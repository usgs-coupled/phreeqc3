<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 7.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="phreeqc3.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> SOLUTION_MODIFY</TITLE><HR><P> | <A HREF="phreeqc3-95.htm">Next</A> || <A HREF="phreeqc3-93.htm">Previous</A> || <A HREF="phreeqc3.htm">Top</A>  | </P></HEAD>
<BODY BGCOLOR="#ffffff">
<H2 CLASS="FM3d-order-node">
<A NAME="50597901_pgfId-473917"></A><STRONG CLASS="Bold">
SOLUTION_MODIFY</STRONG>
<A NAME="50597901_89789"></A><A NAME="50597901_96148"></A></H2>
<P CLASS="BodyText">
<A NAME="50597901_pgfId-505110"></A>This keyword data block is used to modify the definition of a previously defined solution composition. New elements may be added to the solution, and the number of moles of elements may be changed. However, care is needed to preserve the correct relations between the number of moles of elements, equivalents of charge imbalance, and moles of hydrogen and oxygen. Initial estimates for log activity of master species are updated automatically if the number of moles of an element is adjusted; alternatively, new initial estimates for log activity of master species may be specified explicitly with <STRONG CLASS="Bold">
-activities</STRONG>
. The format of the data block is the same as the <A HREF="phreeqc3-95.htm#50597901_69484" CLASS="XRef">SOLUTION_RAW</A> data block except that the data block need not be complete. The <STRONG CLASS="Bold">
SOLUTION_MODIFY</STRONG>
 data block can be used selectively to change data items. The Example data block lists a subset of identifiers that can be used in <STRONG CLASS="Bold">
SOLUTION_MODIFY</STRONG>
 data blocks. </P>
<DIV>
<H6 CLASS="FM4thOrderHeading">
<A NAME="50597901_pgfId-505114"></A><A NAME="50597901_52857"></A>Example data block</H6>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505115"></A>Line 0:  SOLUTION_MODIFY 1 Modified solution description</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505207"></A>Line 1:	-temp              25</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505208"></A>Line 2:	-total_h           111.01243359981</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505209"></A>Line 3:	-total_o           55.506216800086</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505210"></A>Line 4:	-cb                -3.657928589893e-10</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505211"></A>Line 5:	-totals</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505212"></A>Line 6:		Cl	0.0020000000000003</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505424"></A>Line 6a:		Fe(2)	3.9999998897204e-007</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505213"></A>Line 6b:		Fe(3)	1.1027960586156e-014</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505214"></A>Line 6d:		Na	0.0020000000000003</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505602"></A>Line 6c:		S	0.02012</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-965197"></A><EM CLASS="ChangeFont">Line 13:	-pressure		100</EM>
</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505567"></A>&nbsp;</pre>
<P CLASS="BodyTextFlush">
<A NAME="50597901_pgfId-505566"></A>The following lines optionally set initial estimates of master variables.</P>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505394"></A>Line 7:	-pH	6.61</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505392"></A>Line 8:	-pe	0</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505502"></A>Line 9:	-mu	0.07</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505501"></A>Line 10:	-ah2o	0.9985</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505222"></A>Line 11:	-activities</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505386"></A>Line 12a:		Cl	-3.0</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505470"></A>Line 12b:		Fe(2)	-7.6</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505475"></A>Line 12c:		Fe(3)	-23.4</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505389"></A>Line 12d:		Na	-3.0</pre>
<pre CLASS="ComputerInput"><A NAME="50597901_pgfId-505227"></A>Line 12e:		S	-3.9</pre>
</DIV>
<DIV>
<H6 CLASS="FM4thOrderHeading">
<A NAME="50597901_pgfId-505129"></A><A NAME="50597901_36829"></A>Explanation</H6>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505130"></A>Line 0: <STRONG CLASS="Bold">
SOLUTION_MODIFY</STRONG>
<EM CLASS="Emphasis">
 number</EM>
 [<EM CLASS="Emphasis">
description</EM>
]</P>
<P CLASS="Body1">
<A NAME="50597901_pgfId-505131"></A><STRONG CLASS="Bold">
SOLUTION_MODIFY</STRONG>
 is the keyword for the data block.</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-523256"></A><EM CLASS="Emphasis">
number</EM>
--Positive integer to identify the solution to modify.</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-523257"></A><EM CLASS="Emphasis">
description</EM>
--Optional comment that describes the solution.</P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-523263"></A>Line 1: <STRONG CLASS="Bold">
-temp </STRONG>
<EM CLASS="Emphasis">
tc</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-523264"></A><STRONG CLASS="Bold">
-temp</STRONG>
 <EM CLASS="Emphasis">
tc</EM>
--Sets the temperature for the solution; <EM CLASS="Emphasis">
tc</EM>
 is in degrees Celsius. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-523265"></A>Line 2: <STRONG CLASS="Bold">
-total_h </STRONG>
<EM CLASS="Emphasis">
moles</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505137"></A><STRONG CLASS="Bold">
-total_h </STRONG>
<EM CLASS="Emphasis">
moles</EM>
--Total moles of hydrogen in the solution. A solution with one kilogram of water, contains approximately 111.0 moles of hydrogen; however, the value must be known precisely to set the correct redox conditions. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505706"></A>Line 3: <STRONG CLASS="Bold">
-total_o </STRONG>
<EM CLASS="Emphasis">
moles</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505707"></A><STRONG CLASS="Bold">
-total_o </STRONG>
<EM CLASS="Emphasis">
moles</EM>
--Total moles of oxygen in the solution. A solution with one kilogram of water, contains approximately 55.5 moles of oxygen; however, the value must be known precisely to set the correct redox conditions. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505786"></A>Line 4: <STRONG CLASS="Bold">
-cb </STRONG>
<EM CLASS="Emphasis">
equivalents</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505787"></A><STRONG CLASS="Bold">
-cb </STRONG>
<EM CLASS="Emphasis">
equivalents</EM>
--Equivalents of charge imbalance in the solution. Although physical solutions are nearly perfectly balanced in charge, analytical errors can result in apparent charge imbalances for solutions. Surface reactions without explicit definition of the double layer composition also can impart charge imbalances to a solution. The value of the charge imbalance must be known precisely to set the correct redox conditions. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505138"></A>Line 5: <STRONG CLASS="Bold">
-totals</STRONG>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505139"></A><STRONG CLASS="Bold">
-totals</STRONG>
--Identifier begins a block of data that modifies the number of moles of elements or element valence states in the solution. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505140"></A>Line 6: (<EM CLASS="Emphasis">
Element </EM>
or<EM CLASS="Emphasis">
 element valence state</EM>
)<EM CLASS="Emphasis">
 moles</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505819"></A><EM CLASS="Emphasis">
Element </EM>
or<EM CLASS="Emphasis">
 element valence state</EM>
--An element or element valence state that has been defined in a <A HREF="phreeqc3-42.htm#50597889_19910" CLASS="XRef">SOLUTION_MASTER_SPECIES</A> data block. If a redox element is specified (that is, a redox element name without following parentheses), all valence states of the element are removed from the solution and moles is the total number of moles of the redox element in solution, inclusive of all valence states. If an element valence state is defined (that is, a redox element name with following parentheses), then, if present, the element (no parentheses) is removed from solution, and the element valence state (with parentheses) is added to the solution. </P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505142"></A><EM CLASS="Emphasis">
moles</EM>
--Number of moles of the element or element valence state in the solution.</P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505845"></A>Line 7: <STRONG CLASS="Bold">
-pH </STRONG>
<EM CLASS="Emphasis">
pH</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505846"></A><STRONG CLASS="Bold">
-pH </STRONG>
<EM CLASS="Emphasis">
pH</EM>
--Sets the initial estimate of the pH, which is used in solving the system of nonlinear equations that define solution equilibrium. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505862"></A>Line 8: <STRONG CLASS="Bold">
-pe </STRONG>
<EM CLASS="Emphasis">
pe</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505863"></A><STRONG CLASS="Bold">
-pe </STRONG>
<EM CLASS="Emphasis">
pe</EM>
--Sets the initial estimate of the pe, which is used in solving the system of nonlinear equations that define solution equilibrium. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505879"></A>Line 9: <STRONG CLASS="Bold">
-mu </STRONG>
<EM CLASS="Emphasis">
mu</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505880"></A><STRONG CLASS="Bold">
-mu </STRONG>
<EM CLASS="Emphasis">
mu</EM>
--Sets the initial estimate of the ionic strength, which is used in solving the system of nonlinear equations that define solution equilibrium. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505884"></A>Line 10: <STRONG CLASS="Bold">
-ah2o </STRONG>
<EM CLASS="Emphasis">
ah2o</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505885"></A><STRONG CLASS="Bold">
-ah2o </STRONG>
<EM CLASS="Emphasis">
ah2o</EM>
--Sets the initial estimate of the activity of water, which is used in solving the system of nonlinear equations that define solution equilibrium. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505927"></A>Line 11: <STRONG CLASS="Bold">
-activities</STRONG>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505928"></A><STRONG CLASS="Bold">
-activities</STRONG>
--Identifier begins a data block that sets initial estimates of the activities of the master species, which are used in solving the system of nonlinear equations that define solution equilibrium. For redox elements, the activity of only one redox state is used in solving the equilibrium equations. The activity used is usually that of the primary master species; however, it is possible that the equations have been rewritten so that the primary master species has been replaced by one of the secondary master species, in which case, the initial estimate of the secondary master species is the one that is used to begin solving the nonlinear equations that define solution equilibrium. When the number of moles of an element are changed, log activities for that element [and (or) element valence states] automatically will be adjusted by log of the new number of moles divided by the old number of moles. Use of <STRONG CLASS="Bold">
-activities</STRONG>
 overrides this automatic adjustment for each element in the <STRONG CLASS="Bold">
-activities</STRONG>
 list.</P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-505984"></A>Line 12: <EM CLASS="Emphasis">
master species</EM>
,<EM CLASS="Emphasis">
 log activity</EM>
</P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505985"></A><EM CLASS="Emphasis">
master species</EM>
--An element or element valence state master species that has been defined in a <A HREF="phreeqc3-42.htm#50597889_19910" CLASS="XRef">SOLUTION_MASTER_SPECIES</A> data block. </P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-505989"></A><EM CLASS="Emphasis">
log activity</EM>
--Initial estimate of the log activity of the master species, which is used in solving the system of nonlinear equations that define solution equilibrium. </P>
<P CLASS="Body-indent">
<A NAME="50597901_pgfId-965105"></A><EM CLASS="ChangeFont">
Line 13: -pressure pressure</EM>
<A NAME="50597901_68137"></A></P>
<P CLASS="Body1-indent">
<A NAME="50597901_pgfId-965106"></A><EM CLASS="ChangeFont">
-pressure pressure--Sets the pressure for the solution, in atm. </EM>
</P>
</DIV>
<DIV>
<H6 CLASS="FM4thOrderHeading">
<A NAME="50597901_pgfId-505158"></A>Notes</H6>
<P CLASS="BodyText">
<A NAME="50597901_pgfId-505159"></A>The <STRONG CLASS="Bold">
SOLUTION_MODIFY </STRONG>
data block allows modification of a preexisting solution definition. Lines 1 through 6 in the Example data block set the temperature and the number of moles of elements and element redox states for the solution. Care is needed to maintain concordance between the number of moles of elements (including hydrogen and oxygen) and the charge imbalance. Inconsistent alteration of the moles of elements and equivalents of charge imbalance will result in unexpected pH and redox reactions. </P>
<P CLASS="BodyText">
<A NAME="50597901_pgfId-523285"></A>Lines 7 through 12 set initial estimates of unknowns for the equations that define solution equilibrium but do not affect the actual solution composition or the ultimate values of the numerical solution to the equations. The definitions on lines 7 through 12 could affect whether a numerical solution is found or the number of iterations needed to find a numerical solution. The initial estimates of unknowns can make a substantial difference in the number of iterations to solve a chemical system and, consequently, in run times, especially for transport calculations. If the number of moles of an element is adjusted (<STRONG CLASS="Bold">
-totals</STRONG>
), by default, the log activity associated with that element is automatically adjusted by the log of the ratio of the new moles to the old moles. Logic is included to adjust valence states as well as total moles of a redox element. Use of -activities for an element supersedes the automatic adjustment for log activities for that element. </P>
<P CLASS="BodyText">
<A NAME="50597901_pgfId-523278"></A>The most common use of a <STRONG CLASS="Bold">
SOLUTION_MODIFY </STRONG>
data block is expected to be in transport models that use IPhreeqc modules. The transport code is used to transport elemental concentrations conservatively, and then the moles of elements in the solutions in the IPhreeqc module are updated with the transport results by using a series of <A HREF="phreeqc3-94.htm#50597901_96148" CLASS="XRef">SOLUTION_MODIFY</A> data blocks. Geochemical reactions are calculated in the IPhreeqc module, and the new compositions of solutions are retrieved by extracting data defined by <A HREF="phreeqc3-38.htm#50597889_20239" CLASS="XRef">SELECTED_OUTPUT</A> or by the output from a <A HREF="phreeqc3-11.htm#50597889_49635" CLASS="XRef">DUMP</A> data block. The reacted solution concentrations then are used to begin a new conservative transport step in the transport model. Care is needed to convert the moles of an element in an IPhreeqc solution (as written with <A HREF="phreeqc3-11.htm#50597889_49635" CLASS="XRef">DUMP</A>) to the concentration of the element used in the transport code, and, conversely, to convert the concentrations from transport to the number of moles in an IPhreeqc solution.</P>
<P CLASS="BodyText">
<A NAME="50597901_pgfId-506064"></A><STRONG CLASS="Bold">
SOLUTION_MODIFY </STRONG>
modifies only the data items specifically defined in the data block. Any data items in the solution definition not modified by the data block remain unchanged. Modification of the number of moles of redox elements requires special care. A redox element is defined simply by the element name and represents the total moles of that element, including all valence states. A redox element valence state is defined by the element name followed by a valence state in parentheses. When a redox element is defined in <STRONG CLASS="Bold">
-totals</STRONG>
, all element valence states are removed from the solution, and only the total concentration remains. When a redox element valence state is defined in <STRONG CLASS="Bold">
-totals</STRONG>
, then the redox element (total moles), if it is present, is removed, but other valence-state concentrations are retained. </P>
</DIV>
<DIV>
<H6 CLASS="FM4thOrderHeading">
<A NAME="50597901_pgfId-505163"></A><A NAME="50597901_67839"></A>Related keywords</H6>
<P CLASS="BodyText">
<A NAME="50597901_pgfId-505170"></A><A HREF="phreeqc3-41.htm#50597889_30253" CLASS="XRef">SOLUTION</A> and <A HREF="phreeqc3-95.htm#50597901_69484" CLASS="XRef">SOLUTION_RAW</A>.</P>
</DIV>
<HR><P> | <A HREF="phreeqc3-95.htm">Next</A> || <A HREF="phreeqc3-93.htm">Previous</A> || <A HREF="phreeqc3.htm">Top</A>  | </P></BODY>
</HTML>
